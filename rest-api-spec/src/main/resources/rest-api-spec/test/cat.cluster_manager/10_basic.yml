---
"Help":
  - skip:
      version: " - 1.4.99"
      reason: "path _cat/cluster_manager is introduced in 2.0.0"
  - do:
      cat.cluster_manager:
        help: true

  - match:
      $body: |
        /^  id       .+ \n
            host     .+ \n
            ip       .+ \n
            node     .+ \n
        
        $/

---
"Test cat cluster_manager output":
  - skip:
      version: " - 1.4.99"
      reason: "path _cat/cluster_manager is introduced in 2.0.0"
  - do:
      cat.cluster_manager: {}

  - match:
      $body: |
        /^
          ( \S+                     \s+ # node id
            [-\w.]+                 \s+ # host name
            (\d{1,3}\.){3}\d{1,3}   \s+ # ip address
            [-\w.]+                     # node name
            \n
          )
        $/

---
"Help - cat master":
  - skip:
      features: allowed_warnings
  - do:
      cat.master:
        help: true
      allowed_warnings:
        - '[GET /_cat/master] is deprecated! Use [GET /_cat/cluster_manager] instead.'

  - match:
      $body: |
        /^  id       .+ \n
            host     .+ \n
            ip       .+ \n
            node     .+ \n
        
        $/

---
"Test cat master output":
  - skip:
      features: allowed_warnings
  - do:
      cat.master: {}
      allowed_warnings:
        - '[GET /_cat/master] is deprecated! Use [GET /_cat/cluster_manager] instead.'

  - match:
      $body: |
        /^
          ( \S+                     \s+ # node id
            [-\w.]+                 \s+ # host name
            (\d{1,3}\.){3}\d{1,3}   \s+ # ip address
            [-\w.]+                     # node name
            \n
          )
        $/
